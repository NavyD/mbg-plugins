# Mybatis-Generator 自定义插件

## 目标

通过MBG与自定义插件达到只用mybatis快速开发，而不是使用mybatis-plus。

当前使用自己的通用BaseMapper与MBG对应方法一致，不需要写Mapper与xml

## 典型用法

XxxMapper.java

```java
public interface BaseMapper<T> extends ExampleMapper<T> {
  default List<T> selectAll() {
    return selectByExample(null);
  }

  Optional<T> selectByPrimaryKey(Object key);

  int insert(T record);

  int insertSelective(T record);

  int updateByPrimaryKey(T record);

  int updateByPrimaryKeySelective(T record);

  int deleteByPrimaryKey(Object key);
}
```

Entity:

```java
@Data
@SuperBuilder
@EqualsAndHashCode(callSuper = true)
@ToString(callSuper = true)
public class UserInfo extends BaseEntity implements Serializable {
    private String wxId;
    private String wxNickname;
    private String roles;
    private String avatarUrl;
    private Integer bonus;
    private static final long serialVersionUID = 1L;
}
@Data
@SuperBuilder
@NoArgsConstructor
public class BaseEntity {
    private Long id;
    private LocalDateTime gmtCreate;
    private LocalDateTime gmtModified;
}
```

xxxMapper.xml

```xml
<!-- ... -->
<update id="updateByPrimaryKey" parameterType="test.model.UserInfo">
  <!--
    WARNING - @mbg.generated
    This element is automatically generated by MyBatis Generator, do not modify.
  -->
  update user_info
  set wx_id = #{wxId,jdbcType=VARCHAR},
    wx_nickname = #{wxNickname,jdbcType=VARCHAR},
    roles = #{roles,jdbcType=VARCHAR},
    avatar_url = #{avatarUrl,jdbcType=VARCHAR},
    bonus = #{bonus,jdbcType=INTEGER},
    gmt_create = #{gmtCreate,jdbcType=TIMESTAMP},
    gmt_modified = #{gmtModified,jdbcType=TIMESTAMP}
  where id = #{id,jdbcType=BIGINT}
</update>
<!-- ... -->
```

参考：

- [代码演示Mybatis-Generator 扩展自定义生成](https://juejin.im/post/6844904071795572750#heading-9)
- [MyBatis Generator 详解](https://blog.csdn.net/isea533/article/details/42102297)
- [mybatis](https://mybatis.org/mybatis-3/zh/getting-started.html)
- [MyBatis Generator](https://mybatis.org/generator/index.html)
